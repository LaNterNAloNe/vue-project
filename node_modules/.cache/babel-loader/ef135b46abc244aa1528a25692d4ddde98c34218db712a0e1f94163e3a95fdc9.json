{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app-container\"\n};\nconst _hoisted_2 = {\n  class: \"main-content\"\n};\nconst _hoisted_3 = {\n  class: \"upload-section\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"upload-prompt\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"file-details\"\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n  class: \"display-section\"\n};\nconst _hoisted_8 = {\n  class: \"subtitle-display-container\"\n};\nconst _hoisted_9 = {\n  class: \"subtitle-area\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"subtitle-placeholder\"\n};\nconst _hoisted_11 = {\n  key: 1,\n  class: \"subtitle-placeholder\"\n};\nconst _hoisted_12 = {\n  key: 2,\n  class: \"subtitle-list\"\n};\nconst _hoisted_13 = {\n  class: \"timestamp\"\n};\nconst _hoisted_14 = [\"innerHTML\"];\nconst _hoisted_15 = {\n  key: 0,\n  class: \"text-original\"\n};\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = {\n  class: \"subtitle-display-container\"\n};\nconst _hoisted_18 = {\n  class: \"subtitle-area\"\n};\nconst _hoisted_19 = {\n  key: 0,\n  class: \"subtitle-placeholder\"\n};\nconst _hoisted_20 = {\n  key: 1,\n  class: \"subtitle-placeholder\"\n};\nconst _hoisted_21 = {\n  key: 2,\n  class: \"subtitle-list\"\n};\nconst _hoisted_22 = {\n  class: \"timestamp\"\n};\nconst _hoisted_23 = {\n  class: \"text-original\"\n};\nconst _hoisted_24 = {\n  class: \"text-translated\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[17] || (_cache[17] = _createElementVNode(\"header\", {\n    class: \"app-header\"\n  }, [_createElementVNode(\"h1\", null, \"‰∏≠ÂõΩÁΩëÁªúÂæÆÁü≠ÂâßËã±ËØëÊô∫ËÉΩ‰Ωì\"), _createElementVNode(\"p\", {\n    class: \"subtitle\"\n  }, \"AI-Powered Chinese Short Drama Translation Agent\")], -1 /* CACHED */)), _createElementVNode(\"main\", _hoisted_2, [_createElementVNode(\"section\", _hoisted_3, [_createElementVNode(\"div\", {\n    class: \"upload-box\",\n    onDragover: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"])),\n    onDrop: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.handleDrop && $setup.handleDrop(...args), [\"prevent\"])),\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.triggerFileUpload && $setup.triggerFileUpload(...args))\n  }, [_createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"file-upload\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $setup.handleFileChange && $setup.handleFileChange(...args)),\n    accept: \".srt\",\n    ref: \"fileInput\",\n    style: {\n      \"display\": \"none\"\n    }\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), !$setup.File ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"64\",\n    height: \"64\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\",\n    \"stroke-linecap\": \"round\",\n    \"stroke-linejoin\": \"round\",\n    class: \"upload-icon\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n  }), _createElementVNode(\"polyline\", {\n    points: \"17 8 12 3 7 8\"\n  }), _createElementVNode(\"line\", {\n    x1: \"12\",\n    y1: \"3\",\n    x2: \"12\",\n    y2: \"15\"\n  })], -1 /* CACHED */)), _createCommentVNode(\" upload icon \"), _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"Â∞ÜÊñáÊú¨ÊàñÂ≠óÂπïÊñá‰ª∂ÊãñÊãΩÂà∞Ê≠§Â§Ñ\", -1 /* CACHED */)), _cache[9] || (_cache[9] = _createElementVNode(\"small\", {\n    class: \"file-info\"\n  }, \"ÊîØÊåÅ srt Ê†ºÂºè\", -1 /* CACHED */))])) : _createCommentVNode(\"v-if\", true), $setup.File ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"h4\", null, \"Â∑≤ÈÄâÊã©Êñá‰ª∂:\", -1 /* CACHED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.File.name), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = _withModifiers((...args) => $setup.startProcessing && $setup.startProcessing(...args), [\"stop\"])),\n    class: \"process-button\",\n    disabled: $setup.isProcessing\n  }, _toDisplayString($setup.isProcessing ? 'Â§ÑÁêÜ‰∏≠...' : 'ÂºÄÂßãÁøªËØë'), 9 /* TEXT, PROPS */, _hoisted_6)])) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"section\", _hoisted_7, [_createCommentVNode(\" Ê∫êÊñá‰ª∂È¢ÑËßà \"), _cache[15] || (_cache[15] = _createElementVNode(\"h3\", {\n    class: \"tight-title\"\n  }, \"Ê∫êÂ≠óÂπïÈ¢ÑËßà (Original Subtitle Preview)\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [$setup.File === null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[11] || (_cache[11] = [_createElementVNode(\"p\", null, \"‰∏ä‰º†ÁöÑÊñá‰ª∂ÊàñÂ≠óÂπïÂÜÖÂÆπÂ∞ÜÂú®Ê≠§ÊòæÁ§∫...\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true), $setup.File !== null && $setup.original_subtitles.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _cache[12] || (_cache[12] = [_createElementVNode(\"p\", null, \"‰∏ä‰º†ÁöÑÊñá‰ª∂ÊöÇÊó†ÂÜÖÂÆπ\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true), $setup.original_subtitles.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.original_subtitles, (subtitle, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: \"subtitle-item\"\n    }, [_createElementVNode(\"span\", _hoisted_13, _toDisplayString(subtitle.timestamp), 1 /* TEXT */), _createElementVNode(\"p\", {\n      class: \"text-original\",\n      innerHTML: subtitle.original\n    }, null, 8 /* PROPS */, _hoisted_14), subtitle.translated ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, _toDisplayString(subtitle.translated), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]), $setup.File ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[5] || (_cache[5] = $event => $setup.downloadJSON($setup.original_subtitles)),\n    class: \"process-button\",\n    disabled: $setup.downloadJSONoffset\n  }, \"‰∏ãËΩΩÂéüÂ≠óÂπïjsonÊñá‰ª∂\", 8 /* PROPS */, _hoisted_16)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" ÁøªËØëÂ≠óÂπïÈ¢ÑËßà \"), _cache[16] || (_cache[16] = _createElementVNode(\"h3\", {\n    class: \"tight-title\"\n  }, \"ÁøªËØëÂ≠óÂπïÈ¢ÑËßà (Translated Subtitle Preview)\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [!$setup.isTranslated ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createCommentVNode(\" Ê≠§Â§ÑÂ∫îÂà§Êñ≠ÊòØÂê¶ÂÆåÊàêÁøªËØëÔºàÁøªËØëÁªìÊûúÂåÖÂê´Êó†ÊñáÊú¨„ÄêÁâπÊÆäÊÉÖÂÜµ„ÄëÔºâ \"), _cache[13] || (_cache[13] = _createElementVNode(\"p\", null, \"ÁøªËØëÁîüÊàêÁöÑÂ≠óÂπïÂ∞ÜÂú®Ê≠§ÊòæÁ§∫...\", -1 /* CACHED */))])) : _createCommentVNode(\"v-if\", true), $setup.translated_subtitles.length === 0 && $setup.isTranslated ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, _cache[14] || (_cache[14] = [_createElementVNode(\"p\", null, \"ÊöÇÊó†ÁøªËØëÁªìÊûú\", -1 /* CACHED */)]))) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.translated_subtitles, (subtitle, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: \"subtitle-item\"\n    }, [_createElementVNode(\"span\", _hoisted_22, _toDisplayString(subtitle.timestamp), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_23, _toDisplayString(subtitle.original), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_24, _toDisplayString(subtitle.translated), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]))]), $setup.isTranslated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[6] || (_cache[6] = $event => $setup.downloadSRT($setup.translated_subtitles)),\n    class: \"process-button\"\n  }, \"‰∏ãËΩΩÂ≠óÂπïÊñá‰ª∂\")) : _createCommentVNode(\"v-if\", true)])])])]);\n}","map":{"version":3,"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onDragover","_cache","_withModifiers","onDrop","args","$setup","handleDrop","onClick","triggerFileUpload","type","onChange","handleFileChange","accept","ref","style","File","_hoisted_4","xmlns","width","height","viewBox","fill","stroke","d","points","x1","y1","x2","y2","_createCommentVNode","_hoisted_5","_toDisplayString","name","startProcessing","disabled","isProcessing","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","original_subtitles","length","_hoisted_11","_hoisted_12","_Fragment","_renderList","subtitle","index","key","_hoisted_13","timestamp","innerHTML","original","translated","_hoisted_15","$event","downloadJSON","downloadJSONoffset","_hoisted_16","_hoisted_17","_hoisted_18","isTranslated","_hoisted_19","translated_subtitles","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","downloadSRT"],"sources":["C:\\NewFiles\\Vue3\\vue-project\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app-container\">\r\n    <header class=\"app-header\">\r\n      <h1>‰∏≠ÂõΩÁΩëÁªúÂæÆÁü≠ÂâßËã±ËØëÊô∫ËÉΩ‰Ωì</h1>\r\n      <p class=\"subtitle\">AI-Powered Chinese Short Drama Translation Agent</p>\r\n    </header>\r\n\r\n    <main class=\"main-content\">\r\n      <section class=\"upload-section\">\r\n        <div class=\"upload-box\" @dragover.prevent @drop.prevent=\"handleDrop\" @click=\"triggerFileUpload\">\r\n          <input type=\"file\" id=\"file-upload\" @change=\"handleFileChange\" accept=\".srt\" ref=\"fileInput\" style=\"display: none;\">\r\n          \r\n          <div v-if=\"!File\" class=\"upload-prompt\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"upload-icon\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg> <!-- upload icon -->\r\n            <p>Â∞ÜÊñáÊú¨ÊàñÂ≠óÂπïÊñá‰ª∂ÊãñÊãΩÂà∞Ê≠§Â§Ñ</p>\r\n            <small class=\"file-info\">ÊîØÊåÅ srt Ê†ºÂºè</small>\r\n          </div>\r\n\r\n          <div v-if=\"File\" class=\"file-details\">\r\n            <h4>Â∑≤ÈÄâÊã©Êñá‰ª∂:</h4>\r\n            <p>{{ File.name }}</p>\r\n            <button @click.stop=\"startProcessing\" class=\"process-button\" :disabled=\"isProcessing\">\r\n              {{ isProcessing ? 'Â§ÑÁêÜ‰∏≠...' : 'ÂºÄÂßãÁøªËØë' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <section class=\"display-section\">\r\n        <!-- Ê∫êÊñá‰ª∂È¢ÑËßà -->\r\n        <h3 class=\"tight-title\">Ê∫êÂ≠óÂπïÈ¢ÑËßà (Original Subtitle Preview)</h3>\r\n        <div class=\"subtitle-display-container\">\r\n          <div class=\"subtitle-area\">\r\n            <div v-if=\"File === null\" class=\"subtitle-placeholder\"> \r\n              <p>‰∏ä‰º†ÁöÑÊñá‰ª∂ÊàñÂ≠óÂπïÂÜÖÂÆπÂ∞ÜÂú®Ê≠§ÊòæÁ§∫...</p>\r\n            </div>\r\n            <div v-if=\"File !== null && original_subtitles.length === 0\" class=\"subtitle-placeholder\">\r\n              <p>‰∏ä‰º†ÁöÑÊñá‰ª∂ÊöÇÊó†ÂÜÖÂÆπ</p>\r\n            </div>\r\n\r\n            <ul v-if=\"original_subtitles.length > 0\" class=\"subtitle-list\">\r\n              <li v-for=\"(subtitle, index) in original_subtitles\" :key=\"index\" class=\"subtitle-item\">\r\n                <span class=\"timestamp\">{{ subtitle.timestamp }}</span>\r\n                <p class=\"text-original\" v-html=\"subtitle.original\"></p>\r\n                <p class=\"text-original\" v-if=\"subtitle.translated\">{{ subtitle.translated }}</p>\r\n              </li>\r\n            </ul>\r\n\r\n          </div>\r\n          <button v-if=\"File\" @click=\"downloadJSON(original_subtitles)\" class=\"process-button\" :disabled=\"downloadJSONoffset\">‰∏ãËΩΩÂéüÂ≠óÂπïjsonÊñá‰ª∂</button>\r\n\r\n        </div>\r\n\r\n        <!-- ÁøªËØëÂ≠óÂπïÈ¢ÑËßà -->\r\n        <h3 class=\"tight-title\">ÁøªËØëÂ≠óÂπïÈ¢ÑËßà (Translated Subtitle Preview)</h3>\r\n        <div class=\"subtitle-display-container\">\r\n          <div class=\"subtitle-area\">\r\n\r\n            <div v-if=\"!isTranslated\" class=\"subtitle-placeholder\"> \r\n            <!-- Ê≠§Â§ÑÂ∫îÂà§Êñ≠ÊòØÂê¶ÂÆåÊàêÁøªËØëÔºàÁøªËØëÁªìÊûúÂåÖÂê´Êó†ÊñáÊú¨„ÄêÁâπÊÆäÊÉÖÂÜµ„ÄëÔºâ -->\r\n              <p>ÁøªËØëÁîüÊàêÁöÑÂ≠óÂπïÂ∞ÜÂú®Ê≠§ÊòæÁ§∫...</p>\r\n            </div>\r\n\r\n            <div v-if=\"translated_subtitles.length === 0 && isTranslated\" class=\"subtitle-placeholder\"> \r\n              <p>ÊöÇÊó†ÁøªËØëÁªìÊûú</p>\r\n            </div>\r\n\r\n            <ul v-else class=\"subtitle-list\">\r\n              <li v-for=\"(subtitle, index) in translated_subtitles\" :key=\"index\" class=\"subtitle-item\">\r\n                <span class=\"timestamp\">{{ subtitle.timestamp }}</span>\r\n                <p class=\"text-original\">{{ subtitle.original }}</p>\r\n                <p class=\"text-translated\">{{ subtitle.translated }}</p>\r\n              </li>\r\n            </ul>\r\n\r\n          </div>\r\n          <button v-if=\"isTranslated\" @click=\"downloadSRT(translated_subtitles)\" class=\"process-button\">‰∏ãËΩΩÂ≠óÂπïÊñá‰ª∂</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage } from 'element-plus';\r\nimport { ref } from 'vue';\r\n\r\nasync function getUserIP() {\r\n  try {\r\n    const res = await fetch('https://api.ipify.org?format=json');\r\n    const data = await res.json();\r\n    console.log('Áî®Êà∑ IP:', data.ip);\r\n    return data.ip;\r\n  } catch (error) {\r\n    console.error('Ëé∑Âèñ IP Â§±Ë¥•:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'App',\r\n  setup() {\r\n    const fileInput = ref(null);\r\n    const File = ref(null);\r\n    const isProcessing = ref(false);\r\n    const isTranslated = ref(false);\r\n    const downloadJSONoffset = ref(false);\r\n    \r\n    // Placeholder for subtitle data\r\n    const original_subtitles = ref([\r\n      // Example data structure\r\n      // { timestamp: '00:00:01,234 --> 00:00:03,456', original: '‰Ω†Â•ΩÔºÅ', translated: 'Hello!' },\r\n    ]);\r\n    const translated_subtitles = ref([\r\n      // Example data structure\r\n      // { timestamp: '00:00:01,234 --> 00:00:03,456', original: '‰Ω†Â•ΩÔºÅ', translated: 'Hello!' },\r\n      // { timestamp: '00:00:04,000 --> 00:00:06,789', original: '‰ªäÂ§©Â§©Ê∞îÁúüÂ•Ω„ÄÇ', translated: 'The weather is great today.' }\r\n    ]);\r\n\r\n    /****************************************\r\n    INFO: Ëß¶ÂèëÊñá‰ª∂‰∏ä‰º†ÁöÑÂáΩÊï∞\r\n    ****************************************/\r\n    const triggerFileUpload = () => {\r\n      fileInput.value.click();\r\n    };\r\n\r\n    const handleDrop = (event) => {\r\n      const file = event.dataTransfer.files[0];\r\n      const fileName = file.name.toLowerCase();\r\n      if (file && (fileName.endsWith('.srt'))) {\r\n        File.value = file;\r\n        readSubtitleFile(file); // üëà Ê∑ªÂä†Ëß£ÊûêÊñπÊ≥ï\r\n      } else {\r\n        ElMessage.warning('ËØ∑ÊãñÂÖ•‰∏Ä‰∏™ÊúâÊïàÁöÑÊñáÊú¨ÊàñÂ≠óÂπïÊñá‰ª∂ÔºÅ');\r\n      }\r\n    };\r\n\r\n    const handleFileChange = (event) => {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n  \r\n      const fileName = file.name.toLowerCase();\r\n      if (fileName.endsWith('.srt')){\r\n        File.value = file;\r\n        readSubtitleFile(file); // üëà Ê∑ªÂä†Ëß£ÊûêÊñπÊ≥ï\r\n      } else {\r\n        ElMessage.warning('ËØ∑ÈÄâÊã©‰∏Ä‰∏™ÊúâÊïàÁöÑÂ≠óÂπïÊñá‰ª∂Ôºà.srtÔºâÔºÅ');\r\n      }\r\n    };\r\n\r\n    /****************************************\r\n    INFO: Ëß£ÊûêÂ≠óÂπïÊñá‰ª∂ÁöÑÂáΩÊï∞\r\n    ****************************************/\r\n    const readSubtitleFile = (file) => {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n          const content = reader.result;\r\n          original_subtitles.value = parseSRT(content); // üëà Ëß£Êûê‰∏∫ÁªìÊûÑÂåñÊï∞ÊçÆ\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n\r\n    const parseSRT = (text) => {\r\n      // ÂéªÈô§ BOM\r\n      if (text.charCodeAt(0) === 0xFEFF) {\r\n        text = text.slice(1);\r\n      }\r\n\r\n      // Ê†áÂáÜÂåñÊç¢Ë°åÁ¨¶\r\n      const normalizedText = text.replace(/\\r\\n|\\r/g, '\\n');\r\n      // ÊåâË°åÂàÜÂâ≤Âπ∂Ê∏ÖÁêÜ\r\n      const lines = normalizedText.split('\\n').map(line => line.trim()).filter(line => line !== '');\r\n\r\n      const subtitles = [];\r\n      let i = 0;\r\n\r\n      while (i < lines.length) {\r\n        // Âà§Êñ≠ÊòØÂê¶ÊòØÂ≠óÂπïÁºñÂè∑\r\n        if (/^\\d+$/.test(lines[i])) {\r\n          const index = lines[i];\r\n          const timestamp = lines[i + 1];\r\n\r\n          // Âà§Êñ≠Êó∂Èó¥Êà≥ÊòØÂê¶ÂêàÊ≥ï\r\n          if (/-->/i.test(timestamp)) {\r\n            let contentLines = [];\r\n            let j = i + 2;\r\n\r\n            // Êî∂ÈõÜÂÜÖÂÆπË°åÔºåÁõ¥Âà∞ÈÅáÂà∞‰∏ã‰∏Ä‰∏™ÁºñÂè∑ÊàñÊñá‰ª∂ÁªìÊùü\r\n            while (j < lines.length && !/^\\d+$/.test(lines[j])) {\r\n              contentLines.push(lines[j]);\r\n              j++;\r\n            }\r\n\r\n            const original = contentLines[0] || '';\r\n            const translated = contentLines[1] || '';\r\n\r\n            subtitles.push({\r\n              index,\r\n              timestamp,\r\n              original,\r\n              translated,\r\n              allContent: contentLines // ÂèØÈÄâÔºö‰øùÁïôÊâÄÊúâÂÜÖÂÆπË°å\r\n            });\r\n\r\n            i = j; // Ë∑≥Âà∞‰∏ã‰∏ÄÂùóÂ≠óÂπï\r\n          } else {\r\n            i++; // Êó∂Èó¥Êà≥‰∏çÂêàÊ≥ïÔºåË∑≥Ëøá\r\n          }\r\n        } else {\r\n          i++; // ÈùûÁºñÂè∑Ë°åÔºåË∑≥Ëøá\r\n        }\r\n      }\r\n\r\n      return subtitles;\r\n    };\r\n\r\n    /****************************************\r\n    INFO: Â§ÑÁêÜÊñá‰ª∂ÁöÑÂáΩÊï∞\r\n    ****************************************/\r\n    const startProcessing = () => {\r\n      if (!File.value) {\r\n        ElMessage.warning('ËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™Êñá‰ª∂ÔºÅ');\r\n        return;\r\n      }\r\n      isProcessing.value = true;\r\n      console.log('ÂºÄÂßãÂ§ÑÁêÜÊñá‰ª∂:', File.value.name);\r\n\r\n      // Ëé∑ÂèñÁî®Êà∑IPÂíåÊó∂Èó¥Êà≥Âπ∂ÁîüÊàêÂ≠óÊÆµÂêç\r\n      getUserIP().then(ip => {\r\n        const now = new Date();\r\n        const timestamp = now.toLocaleString('sv').replace(' ', '-').replace(/:/g, '');\r\n        const fieldName = `subtitle_${ip}_${timestamp}`;\r\n        console.log('Â≠óÊÆµÂêç:', fieldName);\r\n        const formData = new FormData();\r\n        formData.append(fieldName, File); // üëà Âä®ÊÄÅÂ≠óÊÆµÂêç\r\n        fetch('http://localhost:8080/upload-subtitle', {\r\n            method: 'POST',\r\n            body: formData\r\n        });\r\n        // Á≠âÂæÖ‰∏éÂêéÁ´ØÁöÑÈìæÊé•\r\n      });\r\n\r\n      // --- API Integration Placeholder ---\r\n      // 1. Upload file to server\r\n      // 2. Poll for processing status\r\n      // 3. On success, fetch subtitle data\r\n      // ------------------------------------\r\n\r\n      // Simulate API call and receiving data\r\n      setTimeout(() => {\r\n        translated_subtitles.value = [\r\n          { timestamp: '00:00:01,234 --> 00:00:03,456', original: '‰Ω†Â•ΩÔºÅ', translated: 'Hello!' },\r\n          { timestamp: '00:00:04,000 --> 00:00:06,789', original: '‰ªäÂ§©Â§©Ê∞îÁúüÂ•Ω„ÄÇ', translated: 'The weather is great today.' },\r\n          { timestamp: '00:00:07,100 --> 00:00:09,500', original: 'Êàë‰ª¨ÂéªÂÖ¨Âõ≠Âêß„ÄÇ', translated: \"Let's go to the park.\" },\r\n          { timestamp: '00:00:10,000 --> 00:00:12,000', original: 'ÂÜçËßÅÔºÅ', translated: 'Goodbye!' },\r\n          { timestamp: '00:00:13,000 --> 00:00:15,000', original: 'Ë∞¢Ë∞¢ÔºÅ', translated: 'Thanks!' },\r\n        ];\r\n        isProcessing.value = false;\r\n        isTranslated.value = true;\r\n        ElMessage.success('Â§ÑÁêÜÂÆåÊàê');\r\n      }, 3000); // Simulate a 3-second processing time\r\n    };\r\n\r\n    const convertToSRT = (subtitlesArray) => {\r\n      return subtitlesArray.map((item, index) => {\r\n        return `${index + 1}\\n${item.timestamp}\\n${item.original}\\n${item.translated}\\n\\n`\r\n      }).join('')\r\n    };\r\n\r\n    const downloadSRT = () => {\r\n      const srtContent = convertToSRT(translated_subtitles.value)\r\n      const blob = new Blob([srtContent], { type: 'text/plain;charset=plaintext' })\r\n      const url = URL.createObjectURL(blob)\r\n\r\n      // Ëé∑ÂèñÊñá‰ª∂ÂêçÁß∞\r\n      const now = new Date();\r\n      const year = now.getFullYear();\r\n      const month = String(now.getMonth() + 1).padStart(2, '0'); // Êúà‰ªΩ‰ªé 0 ÂºÄÂßã\r\n      const day = String(now.getDate()).padStart(2, '0');\r\n      const hour = String(now.getHours()).padStart(2, '0');\r\n      const minute = String(now.getMinutes()).padStart(2, '0');\r\n      const second = String(now.getSeconds()).padStart(2, '0');\r\n      const downloadFileName = `subtitles-${year}${month}${day}-${hour}${minute}${second}.srt`;\r\n\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = downloadFileName;\r\n      a.click()\r\n\r\n      URL.revokeObjectURL(url)\r\n    };\r\n\r\n    const downloadJSON = (data) => {\r\n      if (!data || data.length === 0) {\r\n        ElMessage.error('Ê≤°ÊúâÊï∞ÊçÆÂèØ‰∏ãËΩΩ');\r\n        return;\r\n      }\r\n      downloadJSONoffset.value = true; // ËÆæÁΩÆ‰∏ãËΩΩÁä∂ÊÄÅ‰∏∫ true\r\n\r\n      const jsonContent = JSON.stringify(data, null, 2);\r\n      const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8' });\r\n      const url = URL.createObjectURL(blob);\r\n      const filename = `subtitles-${new Date().toISOString().replace(/[:.]/g, '-')}-as-json.json`; // ‰ΩøÁî® ISO Ê†ºÂºèÁöÑÊó∂Èó¥Êà≥‰Ωú‰∏∫Êñá‰ª∂Âêç\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = filename;\r\n      a.click();\r\n      setTimeout(() => {\r\n        downloadJSONoffset.value = false; // ‰∏ãËΩΩÂÆåÊàêÂêéÈáçÁΩÆÁä∂ÊÄÅ\r\n      }, 1000); // 1ÁßíÂêéÈáçÁΩÆÁä∂ÊÄÅ\r\n      URL.revokeObjectURL(url);\r\n    };\r\n\r\n    return {\r\n      fileInput,\r\n      File,\r\n      isProcessing,\r\n      original_subtitles,\r\n      translated_subtitles,\r\n      isTranslated,\r\n      downloadJSONoffset,\r\n      triggerFileUpload,\r\n      handleFileChange,\r\n      readSubtitleFile,\r\n      handleDrop,\r\n      startProcessing,\r\n      convertToSRT,\r\n      downloadSRT,\r\n      downloadJSON,\r\n    };\r\n    // ËøôË°®Á§∫Ôºö‰Ω†Â∏åÊúõËøô‰∫õÂèòÈáèÂíåÊñπÊ≥ïÂèØ‰ª•Âú® <template> ‰∏≠Ë¢´ËÆøÈóÆÂíå‰ΩøÁî®„ÄÇ\r\n    // ÂÆûÈôÖ‰∏ä‰Ω†‰ΩøÁî®script setup Êó∂ÔºåÊâÄÊúâÂú® setup ÂáΩÊï∞‰∏≠ÂÆö‰πâÁöÑÂèòÈáèÂíåÊñπÊ≥ïÈÉΩ‰ºöËá™Âä®Êö¥Èú≤Âà∞Ê®°Êùø‰∏≠„ÄÇ\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* Title */\r\n.tight-title {\r\n  margin: 0px 0;\r\n  line-height: 1;\r\n}\r\n\r\n/* Global Styling */\r\n:root {\r\n  --primary-color: #4A90E2;\r\n  --secondary-color: #50E3C2;\r\n  --background-color: #f4f7f9;\r\n  --text-color: #333;\r\n  --border-color: #dbe2e8;\r\n  --card-bg-color: #ffffff;\r\n  --font-family: 'Helvetica Neue', Arial, sans-serif;\r\n}\r\n\r\nbody {\r\n  font-family: var(--font-family);\r\n  background-color: var(--background-color);\r\n  color: var(--text-color);\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n#app-container {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n/* Header */\r\n.app-header {\r\n  text-align: center;\r\n  margin-bottom: 2.5rem;\r\n  border-bottom: 1px solid var(--border-color);\r\n  padding-bottom: 1.5rem;\r\n}\r\n\r\n.app-header h1 {\r\n  font-size: 2.5rem;\r\n  color: var(--primary-color);\r\n  margin: 0;\r\n}\r\n\r\n.app-header .subtitle {\r\n  font-size: 1rem;\r\n  color: #777;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n/* Main Content Layout */\r\n.main-content {\r\n  display: flex;\r\n  gap: 2rem;\r\n  flex-wrap: stretch;\r\n}\r\n\r\n.upload-section, .display-section {\r\n  background-color: var(--card-bg-color);\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n  padding: 2rem;\r\n}\r\n\r\n.upload-section {\r\n  flex: 1;\r\n  min-width: 350px;\r\n  flex-direction: column;\r\n}\r\n\r\n.display-section {\r\n  flex: 2;\r\n  min-width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n/* Upload Box */\r\n.upload-box {\r\n  border: 2px dashed var(--border-color);\r\n  border-radius: 10px;\r\n  padding: 2rem;\r\n  text-align: center;\r\n  transition: all 0.3s ease;\r\n  height: stretch;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.upload-box:hover {\r\n  border-color: var(--primary-color);\r\n  background-color: #f9fcff;\r\n}\r\n\r\n.upload-icon {\r\n  color: var(--primary-color);\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.upload-button {\r\n  background-color: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  padding: 0.8rem 1.5rem;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  transition: background-color 0.3s ease;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.upload-button:hover {\r\n  background-color: #357abd;\r\n}\r\n\r\n.file-info {\r\n  color: #888;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.file-details p {\r\n    word-break: break-all;\r\n    background-color: #f0f0f0;\r\n    padding: 0.5rem;\r\n    border-radius: 5px;\r\n}\r\n\r\n.process-button {\r\n    background-color: var(--secondary-color);\r\n    color: white;\r\n    border: none;\r\n    padding: 0.8rem 2rem;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    font-size: 1rem;\r\n    font-weight: 500;\r\n    transition: background-color 0.3s ease;\r\n    margin-top: 1rem;\r\n}\r\n\r\n.process-button:disabled {\r\n    background-color: #ccc;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* Display Section */\r\n.video-player-container, .subtitle-display-container {\r\n  width: 100%;\r\n}\r\n\r\n.video-player {\r\n  width: 100%;\r\n  border-radius: 8px;\r\n  background-color: #000;\r\n}\r\n\r\n.video-placeholder {\r\n  width: 100%;\r\n  height: 350px;\r\n  background-color: #e9ecef;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #6c757d;\r\n}\r\n\r\n.subtitle-area {\r\n  height: 300px;\r\n  overflow-y: auto;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.subtitle-placeholder {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  color: #888;\r\n}\r\n\r\n.subtitle-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.subtitle-item {\r\n  margin-bottom: 1.2rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n.subtitle-item:last-child {\r\n    border-bottom: none;\r\n}\r\n\r\n.timestamp {\r\n  font-size: 0.8rem;\r\n  color: #666;\r\n  font-family: monospace;\r\n  margin-bottom: 0.4rem;\r\n  display: block;\r\n}\r\n\r\n.text-original {\r\n  font-size: 1rem;\r\n  color: #333;\r\n  margin: 0 0 0.3rem 0;\r\n}\r\n\r\n.text-translated {\r\n  font-size: 1rem;\r\n  color: var(--primary-color);\r\n  font-weight: 500;\r\n  margin: 0;\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}